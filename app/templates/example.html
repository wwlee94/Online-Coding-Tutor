<!DOCTYPE html>
<html lang="ko" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Example for Python </title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
   <!-- Jquery -->
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
   <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
   <style>
      html,body {
        margin: 0;
        padding: 0;
        background-color: rgb(28, 28, 28);
        color: #ffffff;
        margin-top:5px;
      }
   </style>
  </head>
  <body>

  <!-- Main Content -->
<div class="container">
    <div class="page-header">
        <h2>
            파이썬 예제
            <span id="dpTime" class="pull-right"></span>
        </h2>
    </div>
<!--     <table class="table table-hover table-striped"> -->
    <table class="table">
        <thead>
        <tr>
            <th><span class="glyphicon glyphicon-list"></span>&nbsp;제목</th>
            <th><span class="glyphicon glyphicon-info-sign"></span>&nbsp;설명</th>
            <th><span class="glyphicon glyphicon-hdd"></span>&nbsp;파일크기</th>
            <th><span class="glyphicon glyphicon-time"></span>&nbsp;수정일</th>
        </tr>
        </thead>
        <tbody>
          <!--{% set bno = namespace(a=0) %} <변수 변경하려면 이거 사용해야함> -->
         <!-- file_list_py는 app.py에서 보내준 변수임 -->
         {% for list in file_list_py %}
            <form action="/" method="post" id="form{{loop.index}}">
            <tr>
                <td><a href="#" class="link" value="{{loop.index}}">{{list.file}}</a></td>
                <td>{{list.info}}</td>
                <td>{{list.size}}&nbsp;Bytes</td>
                <td>{{list.mtime}}</td>
            </tr>
             <input type="hidden" name="bno" value="{{loop.index}}">
             <input type="hidden" name="content" id="co{{loop.index}}" value="{{list.content}}">
            </form>
          <!--  <input type="hidden" id="co${board.bno}" value="${board.contents}">
            <input type="hidden" id="li${board.bno}" value="${board.likeCount}"> -->
        {% endfor %}
        </tbody>
    </table>


    <button type="button" class="btn btn-default" onClick="back();">돌아가기</button>
    <br/>
    <!-- pagination -->
    <nav aria-label="Search results pages">
        <ul class="pagination justify-content-center">
            <!-- page==1 이면 이전 페이지네이션 disable로 만듬 -->
            <!-- <c:if test="${paging.page==1}">
                <li class="page-item disabled">
                    <a class="page-link" tabindex="-1">
                        <span aria-hidden="true">처음</span>
                    </a>
                </li>
                <li class="page-item disabled">
                    <a class="page-link" tabindex="-1">&lt;</a>
                </li>
            </c:if> -->
            <!-- <c:if test="${paging.page!=1}">
                <li class="page-item">
                    <a class="page-link" href="/board/list?page=1">
                        <span aria-hidden="true">처음</span>
                    </a>
                </li>
                <li class="page-item">
                    <a class="page-link" href="/board/list?page=${paging.page-1}">&lt;</a>
                </li>
            </c:if> -->
            <!-- 페이지 정보 가져와 화면에 출력
                여기가 NullPointerException 뜨긴 하는 데 별 이상은 X
            -->
            <!-- <%
                //JSP로 애트리뷰트 받는 법
                Paging paging = (Paging) request.getAttribute("paging");
                int count = 0;
                //보여줄 페이지 목록은 시작페이지 ~ 마지막 페이지
                for (int i = paging.getStartPage()-1; i < paging.getEndPage(); i++) {
                    if (i == paging.getPage() - 1) {
                        out.print("<li class='page-item active'>");
                    } else {
                        out.print("<li class='page-item'>");
                    }
                    out.print("<a class='page-link' href='/board/list?page=" + (paging.getStartPage() + count) + "'>");
                    out.print((paging.getStartPage() + count));
                    out.print("</a></li>");
                    count++;
                }
            %> -->
            <!-- page가 마지막페이지이면 다음 페이지네이션 disable로 만듬 -->
            <!-- <c:if test="${paging.page==paging.totalPage}">
                <li class="page-item disabled">
                    <a class="page-link" tabindex="-1">&gt;</a>
                </li>
                <li class="page-item disabled">
                    <a class="page-link" tabindex="-1">
                        <span aria-hidden="true">&gt;&gt;</span>
                    </a>
                </li>
            </c:if> -->
            <!-- <c:if test="${paging.page!=paging.totalPage}">
                <li class="page-item">
                    <a class="page-link" href="/board/list?page=${paging.page+1}">&gt;</a>
                </li> -->
                <!-- 10칸씩 페이지 넘기는 기능에 대해 if문 분류 -->
                <!-- <c:if test="${paging.endPage+1 <= paging.totalPage}">
                    <li class="page-item">
                        <a class="page-link" href="/board/list?page=${paging.endPage+1}">
                            <span aria-hidden="true">&gt;&gt;</span>
                        </a>
                    </li>
                </c:if>
                <c:if test="${paging.endPage+1 > paging.totalPage}">
                    <li class="page-item disabled">
                        <a class="page-link" tabindex="-1">
                            <span aria-hidden="true">&gt;&gt;</span>
                        </a>
                    </li>
                </c:if>
            </c:if> -->
        </ul>
    </nav>
</div>

<script>

  onload = function () {
        dpTime();
    };

    function dpTime() {
        var now = new Date();
        hours = now.getHours();
        minutes = now.getMinutes();
        seconds = now.getSeconds();
        if (hours > 12) {
            hours -= 12;
            ampm = "오후 ";
        } else {
            ampm = "오전 ";
        }
        if (hours < 10) {
            hours = "0" + hours;
        }
        if (minutes < 10) {
            minutes = "0" + minutes;
        }
        if (seconds < 10) {
            seconds = "0" + seconds;
        }
        document.getElementById("dpTime").innerHTML = ampm + hours + ":" + minutes + ":" + seconds;

        setTimeout("dpTime()", 1000);
    }
    var bno;

     $(document).ready(function () {
        $('.link').click(function(){
           bno = $(this).attr('value');
           $('#form'+bno).submit();
        });
     });
     
     function back(){
       window.location.href = '/';
     }

// ajax 사용법
//            data = {
//                 "bno": bno,
//                 "content": content
//             };

//             $.ajax({
//             url: url,
//             type: type,
//             data: data,
//             //complete 되면 reload
//             complete: function (data) {
//                 console.log("good response!");
//             }
//             });
//         });
//     });

    </script>
  </body>
</html>
